{"version":3,"file":"commonHelpers2.js","sources":["../src/images/IMG_9606.png","../src/images/amazon.svg","../src/images/book.svg","../src/images/trash.svg","../src/js/API/storage.js"],"sourcesContent":["export default \"__VITE_ASSET__4fd78ed1__\"","export default \"__VITE_ASSET__614bd757__\"","export default \"__VITE_ASSET__f0c2f45b__\"","export default \"__VITE_ASSET__d53f63a1__\"","import '../NZheader';\nimport '../API/header1';\nimport { getBooks } from './api-books';\nimport {\n  addItemLocalStorage,\n  infoItemLocalStorage,\n  restoreData,\n  TASKS_KEY,\n} from '../localStorage';\nimport '../switch-button';\nimport img9606 from '/images/IMG_9606.png';\nimport amazonSvg from '/images/amazon.svg';\nimport bookSvg from '/images/book.svg';\nimport trashSvg from '/images/trash.svg';\nimport tuiPagination from 'tui-pagination'; // Імпортуємо бібліотеку пагінації\n\nconst shoppingListContainer = document.querySelector(\n  '.shoppinglist-shoppinglist'\n);\n\n// Функція для створення елементу <h1 class=\"shoppinglist-text\">\nfunction createShoppingListHeader() {\n  // Перевірка наявності елемента перед створенням нового\n  const existingHeader =\n    shoppingListContainer.querySelector('.shoppinglist-text');\n  if (existingHeader) {\n    return existingHeader;\n  }\n\n  const header = document.createElement('h1');\n  header.classList.add('shoppinglist-text');\n  header.innerHTML = `\n        <span class=\"shoppinglist-text1\">Shopping</span>\n        List\n    `;\n  return header;\n}\n\n// Додавання елементу <h1 class=\"shoppinglist-text\"> до shoppingListContainer\nshoppingListContainer.appendChild(createShoppingListHeader());\n\nconst emptyMessage = `\n<h1 class=\"shoppinglist-text\">Shopping\n\t<span class=\"shoppinglist-text1\">List</span>\n</h1>\n<div class=\"shoppinglist-blocks\">\n    <h2 class=\"text\">This page is empty, add some books and proceed to order.</h2>\n    <img src=\"${img9606}\" alt=\"Shopping Image\" class=\"shoppinglist-img96061\">\n</div>\n`;\n\nasync function addToShoppingList() {\n  try {\n    const booksIds = infoItemLocalStorage(TASKS_KEY);\n\n    if (!booksIds || !booksIds.length) {\n      shoppingListContainer.innerHTML = emptyMessage;\n      return;\n    }\n\n    let markup = '';\n\n    for (const bookId of booksIds) {\n      const dataBook = await getBooks(bookId.constID);\n      markup += createBookMarkup(dataBook, bookId);\n    }\n\n    shoppingListContainer.innerHTML += markup; // Додайте новий вміст до існуючого\n\n    // Оновлення пагінації після додавання книг\n    // updatePagination();\n  } catch (error) {\n    console.error('Error fetching book data:', error);\n  }\n}\n\nfunction createBookMarkup(book, bookId) {\n  const bookDescription = book.description\n    ? book.description\n    : \"With our diverse range of titles, you're sure to find the perfect companion for cozy nights in. Treat yourself to the joy of reading and explore the endless possibilities that await within the pages of our books.\";\n\n  console.log(bookDescription);\n\n  return `\n<div class=\"container-block\" id=\"${bookId.constID}\">    \n    <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"book-image\">\n    <div class=\"text-area\">\n        <h2 class=\"shopping-list-title\">${book.title}</h2>\n        <h2 class=\"shopping-list-title-name\">${book.list_name}</h2>\n        <p class=\"shopping-list-description\">${bookDescription}</p>\n        <h2 class=\"shopping-list-author\">${book.author}</h2>\n    </div>\n        <button class=\"trash-btn\"><img src=\"${trashSvg}\" alt=\"\"></button>\n        <ul class=\"links\">\n            <li><a target=\"_blank\" href=\"${book.buy_links[0].url}\"><img src=\"${amazonSvg}\" class=\"amazon\"></a></li>\n            <li><a target=\"_blank\" href=\"${book.buy_links[1].url}\"><img src=\"${bookSvg}\"  class=\"apple-book\"></a></li>\n        </ul>\n</div>\n  `;\n}\n\nfunction updatePagination() {\n  // Отримуємо кількість сторінок на основі кількості книг\n  const booksIds = infoItemLocalStorage(TASKS_KEY);\n  const totalPages = Math.ceil(booksIds.length / 4); // По 4 книги на сторінку\n\n  // Ініціалізуємо або оновлюємо пагінацію\n  const pagination = new tuiPagination('pagination', {\n    totalItems: totalPages,\n    itemsPerPage: 1,\n    visiblePages: 5,\n  });\n}\n\nshoppingListContainer.addEventListener('click', function (event) {\n  const target = event.target;\n  if (\n    event.target.parentNode.nodeName === 'BUTTON' ||\n    event.target.nodeName === 'BUTTON'\n  ) {\n    const bookContainer = target.closest('.container-block');\n    const bookId = bookContainer.getAttribute('id');\n    let newArr = [];\n    const dataArr = infoItemLocalStorage(TASKS_KEY);\n    for (const item of dataArr) {\n      if (item.constID !== bookId) {\n        newArr.push(item);\n      }\n    }\n    addItemLocalStorage(TASKS_KEY, newArr);\n\n    bookContainer.remove();\n\n    if (!shoppingListContainer.querySelector('.container-block')) {\n      shoppingListContainer.innerHTML = emptyMessage;\n    }\n\n    // Оновлення пагінації після видалення книги\n    // updatePagination();\n  }\n});\n\naddToShoppingList();\n"],"names":["img9606","amazonSvg","bookSvg","trashSvg","shoppingListContainer","createShoppingListHeader","existingHeader","header","emptyMessage","addToShoppingList","booksIds","infoItemLocalStorage","TASKS_KEY","markup","bookId","dataBook","getBooks","createBookMarkup","error","book","bookDescription","event","target","bookContainer","newArr","dataArr","item","addItemLocalStorage"],"mappings":"gHAAA,MAAeA,EAAA,mDCAAC,EAAA,iDCAAC,EAAA,+CCAAC,EAAA,gDCgBTC,EAAwB,SAAS,cACrC,4BACF,EAGA,SAASC,GAA2B,CAElC,MAAMC,EACJF,EAAsB,cAAc,oBAAoB,EAC1D,GAAIE,EACF,OAAOA,EAGT,MAAMC,EAAS,SAAS,cAAc,IAAI,EAC1C,OAAAA,EAAO,UAAU,IAAI,mBAAmB,EACxCA,EAAO,UAAY;AAAA;AAAA;AAAA,MAIZA,CACT,CAGAH,EAAsB,YAAYC,EAAwB,CAAE,EAE5D,MAAMG,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMLR,CAAO;AAAA;AAAA,EAIvB,eAAeS,GAAoB,CACjC,GAAI,CACF,MAAMC,EAAWC,EAAqBC,CAAS,EAE/C,GAAI,CAACF,GAAY,CAACA,EAAS,OAAQ,CACjCN,EAAsB,UAAYI,EAClC,MACD,CAED,IAAIK,EAAS,GAEb,UAAWC,KAAUJ,EAAU,CAC7B,MAAMK,EAAW,MAAMC,EAASF,EAAO,OAAO,EAC9CD,GAAUI,EAAiBF,EAAUD,CAAM,CAC5C,CAEDV,EAAsB,WAAaS,CAIpC,OAAQK,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACjD,CACH,CAEA,SAASD,EAAiBE,EAAML,EAAQ,CACtC,MAAMM,EAAkBD,EAAK,YACzBA,EAAK,YACL,uNAEJ,eAAQ,IAAIC,CAAe,EAEpB;AAAA,mCAC0BN,EAAO,OAAO;AAAA,gBACjCK,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA;AAAA,0CAETA,EAAK,KAAK;AAAA,+CACLA,EAAK,SAAS;AAAA,+CACdC,CAAe;AAAA,2CACnBD,EAAK,MAAM;AAAA;AAAA,8CAERhB,CAAQ;AAAA;AAAA,2CAEXgB,EAAK,UAAU,CAAC,EAAE,GAAG,eAAelB,CAAS;AAAA,2CAC7CkB,EAAK,UAAU,CAAC,EAAE,GAAG,eAAejB,CAAO;AAAA;AAAA;AAAA,GAItF,CAeAE,EAAsB,iBAAiB,QAAS,SAAUiB,EAAO,CAC/D,MAAMC,EAASD,EAAM,OACrB,GACEA,EAAM,OAAO,WAAW,WAAa,UACrCA,EAAM,OAAO,WAAa,SAC1B,CACA,MAAME,EAAgBD,EAAO,QAAQ,kBAAkB,EACjDR,EAASS,EAAc,aAAa,IAAI,EAC9C,IAAIC,EAAS,CAAA,EACb,MAAMC,EAAUd,EAAqBC,CAAS,EAC9C,UAAWc,KAAQD,EACbC,EAAK,UAAYZ,GACnBU,EAAO,KAAKE,CAAI,EAGpBC,EAAoBf,EAAWY,CAAM,EAErCD,EAAc,OAAM,EAEfnB,EAAsB,cAAc,kBAAkB,IACzDA,EAAsB,UAAYI,EAKrC,CACH,CAAC,EAEDC,EAAmB"}