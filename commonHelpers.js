/* empty css                      */import{a as T,i as A}from"./assets/vendor-8cce9181.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();async function y(e,t){const r="https://books-backend.p.goit.global/books/",i=`${e}`;let o;t&&(o={category:`${t}`});const n=`${r}${i}`,c=await T.get(n,{params:o});if(c.data.length===0)throw new Error("Error");return c.data}const E=document.querySelector("body"),h=document.querySelector(".modal"),k=document.querySelector(".backdrop"),q=document.querySelector(".modal-close-btn"),p=document.querySelector(".modal-list-btn");async function M(e){document.addEventListener("keydown",C);const t=await y(e);j(t),p.addEventListener("click",function(){O(e),p.blur()})}function j(e){var o,n;k.style.display="flex",E.style.overflow="hidden";const t=((o=e.buy_links.find(c=>c.name==="Amazon"))==null?void 0:o.url)||"",r=((n=e.buy_links.find(c=>c.name==="Apple Books"))==null?void 0:n.url)||"",i=`
  <ul class="buy-links-list">
    <li>
      <img src="./images/amazon.png" alt="Amazon" class="platform-image" data-url="${t}">
    </li>
    <li>
      <img src="./images/book.png" alt="Apple Books" class="platform-image" data-url="${r}">
    </li>
  </ul>
`;h.innerHTML=`
  <div class="modal-container">
  <img src="${e.book_image}" class="modal-image">
    <div class="modal-wrap">
      <h2 class="modal-title">${e.title}</h2>
      <p class="modal-author">${e.author}</p>
      <p class="description">${e.description}</p>
      ${i}
    </div>  
  </div>
`,h.appendChild(q),h.appendChild(p),h.querySelectorAll(".platform-image").forEach(c=>{c.addEventListener("click",()=>{const s=c.dataset.url;s?window.open(s,"_blank"):console.error("Platform URL not found.")})})}function O(e){const t=p.textContent.trim(),r=localStorage.getItem("shoppingList"),i=JSON.parse(r)||{};t==="add to shopping list"?(i[e]=!0,p.textContent="remove from the shopping list"):(i[e]&&delete i[e],p.textContent="add to shopping list"),localStorage.setItem("shoppingList",JSON.stringify(i))}document.addEventListener("DOMContentLoaded",function(){q.addEventListener("click",function(){S()}),k.addEventListener("click",function(e){e.target===k&&S()})});function C(e){e.key==="Escape"&&(S(),document.removeEventListener("keydown",C))}function S(){k.style.display="none",E.style.overflow="auto"}const N="category";async function B(e){const t=document.querySelector(".js-booksgallery");t.innerHTML="";try{const i=await y(N,e);H(i),I(e)}catch(i){console.error("Failed to fetch books:",i)}const r=document.querySelectorAll(".cardCategory");document.addEventListener("click",i=>{for(const o of r){let n=o.dataset.id;i.target.parentNode===o&&M(n)}})}function H(e){const t=document.querySelector(".booksgallery"),r=e.map(i=>`
      <li class="booksgallery-item cardCategory" data-id="${i._id}">
          <img class="gallery-image" src="${i.book_image}" alt="${i.description}">
          <h3 class="name-book">${i.title}</h3>
          <p class="author-book">${i.author}</p>
      </li>`).join("");t.insertAdjacentHTML("beforeend",r)}function I(e){const t=document.querySelector(".selected-title"),r=e.split(" "),i=r[r.length-1];r.pop(),t.innerHTML=`${r.join(" ")} <span class="selected-color">${i} </span>`}const w={galleryBooks:document.querySelector(".js-gallery-books"),btnMore:document.querySelector(".btn-more"),listCategoryTitle:document.querySelector(".list-category-title"),allListCategories:document.querySelector(".js-books-categories"),categoryItems:document.querySelectorAll(".category-books-item")};document.addEventListener("DOMContentLoaded",()=>{async function e(){const t=await y("category-list");let r='<li data-category="top-books" class="category-books-item">All categories</li>';t.forEach(n=>{r+=`<li class="category-books-item" data-category="${n.list_name}">${n.list_name}</li>`}),w.allListCategories.insertAdjacentHTML("beforeend",r),document.querySelectorAll(".category-books-item").forEach(n=>{n.addEventListener("click",o)});function o(n){n.preventDefault();const c=document.querySelector(".js-home-pg"),s=document.querySelector(".js-selected-page"),a=n.target.innerHTML;for(const d of t)d.list_name===a&&(c.style.display="none",s.style.display="block",B(a));a==="All categories"&&(c.style.display="block",s.style.display="none")}}e()});function b(e){A.error({title:"Error",message:e})}document.addEventListener("DOMContentLoaded",()=>{let e=window.innerWidth;window.addEventListener("resize",async()=>{const s=window.innerWidth;if(e>768||e<768&&s>=768||e>=768&&s<=1440&&(e<=768||s>=1439))try{const a=await y("top-books");w.galleryBooks.innerHTML="";for(const d of a)r(d),d.books.length>=1?n(d):b("Sorry, there are no items in this category")}catch(a){b(`Failed to render books:${a}`)}e=s});async function t(){try{let g=function(l){const u=document.querySelector(".js-home-pg"),f=document.querySelector(".js-selected-page"),_=l.srcElement.dataset.id;u.style.display="none",f.style.display="block",B(_)};const s=await y("top-books");for(const l of s)r(l),l.books.length>=1?n(l):b("Sorry, there are no items in this category");const a=document.querySelectorAll(".card");document.addEventListener("click",l=>{for(const u of a){let f=u.dataset.id;l.target.parentNode===u&&M(f)}}),document.querySelectorAll(".btn-more").forEach(l=>{l.addEventListener("click",g)})}catch(s){b(`Failed to render books:${s}`)}}function r(s){const a=`<li id="${s.list_name}" class="list-category-books">
    <h2 class="list-category-title">${s.list_name}</h2>
    <ul class="list-book">
     </ul>
    <button type="button" class="btn-more" data-id="${s.list_name}">See more</button>`;w.galleryBooks.insertAdjacentHTML("beforeend",a)}function i(s){const{book_image:a,author:d,title:g,_id:l,contributor:u,list_name:f}=s;if(f)return`
    <li class="card book-item" data-id="${l}">
    <img class="book-img" src="${a}" alt="${u} ${g}">
    <h3 class="title-book">${g}</h3>
    <p class="author">${d}</p>
    </li>
   `}function o(s){return s.map(i).join("")}function n(s){const a=c(s),d=s.list_name;document.getElementById(d).querySelector(".list-book").insertAdjacentHTML("afterbegin",a)}function c(s){let a;return window.innerWidth>=768&&window.innerWidth<=1439?a=o(s.books.slice(0,3)):window.innerWidth>=1440?a=o(s.books):a=o(s.books.slice(0,1)),a}t()});const v=document.querySelector(".switch-box"),m=document.querySelector(".switch-button");m.addEventListener("click",e=>{m.dataset.switch==="true"?(m.classList.remove("new-position"),v.classList.remove("new-background"),m.dataset.switch="false"):(m.classList.add("new-position"),v.classList.add("new-background"),m.dataset.switch="true")});document.querySelector(".shoppinglist-blocks");async function x(){const t=await y("643282b1e85766588626a0dc");`${t.book_image}${t.title}${t.title}${t.list_name}${t.description}${t.author}`}const $=document.querySelector(".js-hhome"),L=document.querySelector(".js-hshopping");$.addEventListener("click",D);L.addEventListener("click",P);function D(){$.classList.add("hhome-btn"),L.classList.remove("hshopping-btn")}function P(){$.classList.remove("hhome-btn"),L.classList.add("hshopping-btn")}L.addEventListener("click",x);
//# sourceMappingURL=commonHelpers.js.map
