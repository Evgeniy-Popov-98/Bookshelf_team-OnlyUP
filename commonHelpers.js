import{a as _,i as A}from"./assets/vendor-8cce9181.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();async function f(e,r){const i="https://books-backend.p.goit.global/books/",s=`${e}`;let t;r&&(t={category:`${r}`});const o=`${i}${s}`,c=await _.get(o,{params:t});if(c.data.length===0)throw new Error("Error");return c.data}const $=document.querySelector("body"),h=document.querySelector(".modal"),b=document.querySelector(".backdrop"),q=document.querySelector(".modal-close-btn"),p=document.querySelector(".modal-list-btn");async function M(e){document.addEventListener("keydown",C);const r=await f(e);j(r),p.addEventListener("click",function(){O(e),p.blur()})}function j(e){var t,o;b.style.display="flex",$.style.overflow="hidden";const r=((t=e.buy_links.find(c=>c.name==="Amazon"))==null?void 0:t.url)||"",i=((o=e.buy_links.find(c=>c.name==="Apple Books"))==null?void 0:o.url)||"",s=`
  <ul class="buy-links-list">
    <li>
      <img src="./images/amazon.png" alt="Amazon" class="platform-image" data-url="${r}">
    </li>
    <li>
      <img src="./images/book.png" alt="Apple Books" class="platform-image" data-url="${i}">
    </li>
  </ul>
`;h.innerHTML=`
  <div class="modal-container">
  <img src="${e.book_image}" class="modal-image">
    <div class="modal-wrap">
      <h2 class="modal-title">${e.title}</h2>
      <p class="modal-author">${e.author}</p>
      <p class="description">${e.description}</p>
      ${s}
    </div>  
  </div>
`,h.appendChild(q),h.appendChild(p),h.querySelectorAll(".platform-image").forEach(c=>{c.addEventListener("click",()=>{const n=c.dataset.url;n?window.open(n,"_blank"):console.error("Platform URL not found.")})})}function O(e){const r=p.textContent.trim(),i=localStorage.getItem("shoppingList"),s=JSON.parse(i)||{};r==="add to shopping list"?(s[e]=!0,p.textContent="remove from the shopping list"):(s[e]&&delete s[e],p.textContent="add to shopping list"),localStorage.setItem("shoppingList",JSON.stringify(s))}document.addEventListener("DOMContentLoaded",function(){q.addEventListener("click",function(){L()}),b.addEventListener("click",function(e){e.target===b&&L()})});function C(e){e.key==="Escape"&&(L(),document.removeEventListener("keydown",C))}function L(){b.style.display="none",$.style.overflow="auto"}const N="category";async function B(e){const r=document.querySelector(".js-booksgallery");r.innerHTML="";try{const s=await f(N,e);H(s),D(e)}catch(s){console.error("Failed to fetch books:",s)}const i=document.querySelectorAll(".cardCategory");document.addEventListener("click",s=>{for(const t of i){let o=t.dataset.id;s.target.parentNode===t&&M(o)}})}function H(e){const r=document.querySelector(".booksgallery"),i=e.map(s=>`
      <li class="booksgallery-item cardCategory" data-id="${s._id}">
          <img class="gallery-image" src="${s.book_image}" alt="${s.description}">
          <h3 class="name-book">${s.title}</h3>
          <p class="author-book">${s.author}</p>
      </li>`).join("");r.insertAdjacentHTML("beforeend",i)}function D(e){const r=document.querySelector(".selected-title"),i=e.split(" "),s=i[i.length-1];i.pop(),r.innerHTML=`${i.join(" ")} <span class="selected-color">${s} </span>`}const S={galleryBooks:document.querySelector(".js-gallery-books"),btnMore:document.querySelector(".btn-more"),listCategoryTitle:document.querySelector(".list-category-title"),allListCategories:document.querySelector(".js-books-categories"),categoryItems:document.querySelectorAll(".category-books-item")};document.addEventListener("DOMContentLoaded",()=>{async function e(){const r=await f("category-list");let i='<li data-category="top-books" class="category-books-item">All categories</li>';r.forEach(o=>{i+=`<li class="category-books-item" data-category="${o.list_name}">${o.list_name}</li>`}),S.allListCategories.insertAdjacentHTML("beforeend",i),document.querySelectorAll(".category-books-item").forEach(o=>{o.addEventListener("click",t)});function t(o){o.preventDefault();const c=document.querySelector(".js-home-pg"),n=document.querySelector(".js-selected-page"),a=o.target.innerHTML;for(const d of r)d.list_name===a&&(c.style.display="none",n.style.display="block",B(a));a==="All categories"&&(c.style.display="block",n.style.display="none")}}e()});function k(e){A.error({title:"Error",message:e})}document.addEventListener("DOMContentLoaded",()=>{let e=window.innerWidth;window.addEventListener("resize",async()=>{const n=window.innerWidth;if(e>768||e<768&&n>=768||e>=768&&n<=1440&&(e<=768||n>=1439))try{const a=await f("top-books");S.galleryBooks.innerHTML="";for(const d of a)i(d),d.books.length>=1?o(d):k("Sorry, there are no items in this category")}catch(a){k(`Failed to render books:${a}`)}e=n});async function r(){try{let y=function(l){const u=document.querySelector(".js-home-pg"),g=document.querySelector(".js-selected-page"),T=l.srcElement.dataset.id;u.style.display="none",g.style.display="block",B(T)};const n=await f("top-books");for(const l of n)i(l),l.books.length>=1?o(l):k("Sorry, there are no items in this category");const a=document.querySelectorAll(".card");document.addEventListener("click",l=>{for(const u of a){let g=u.dataset.id;l.target.parentNode===u&&M(g)}}),document.querySelectorAll(".btn-more").forEach(l=>{l.addEventListener("click",y)})}catch(n){k(`Failed to render books:${n}`)}}function i(n){const a=`<li id="${n.list_name}" class="list-category-books">
    <h2 class="list-category-title">${n.list_name}</h2>
    <ul class="list-book">
     </ul>
    <button type="button" class="btn-more" data-id="${n.list_name}">See more</button>`;S.galleryBooks.insertAdjacentHTML("beforeend",a)}function s(n){const{book_image:a,author:d,title:y,_id:l,contributor:u,list_name:g}=n;if(g)return`
    <li class="card book-item" data-id="${l}">
    <img class="book-img" src="${a}" alt="${u} ${y}">
    <h3 class="title-book">${y}</h3>
    <p class="author">${d}</p>
    </li>
   `}function t(n){return n.map(s).join("")}function o(n){const a=c(n),d=n.list_name;document.getElementById(d).querySelector(".list-book").insertAdjacentHTML("afterbegin",a)}function c(n){let a;return window.innerWidth>=768&&window.innerWidth<=1439?a=t(n.books.slice(0,3)):window.innerWidth>=1440?a=t(n.books):a=t(n.books.slice(0,1)),a}r()});const E=document.querySelector(".switch-box"),m=document.querySelector(".switch-button");m.addEventListener("click",e=>{m.dataset.switch==="true"?(m.classList.remove("new-position"),E.classList.remove("new-background"),m.dataset.switch="false"):(m.classList.add("new-position"),E.classList.add("new-background"),m.dataset.switch="true")});const w=document.querySelector(".js-hhome"),v=document.querySelector(".js-hshopping");w.addEventListener("click",x);v.addEventListener("click",I);function x(e){e.preventDefault(),w.classList.add("hhome-btn"),v.classList.remove("hshopping-btn")}function I(e){e.preventDefault(),w.classList.remove("hhome-btn"),v.classList.add("hshopping-btn")}
//# sourceMappingURL=commonHelpers.js.map
