{"version":3,"file":"commonHelpers.js","sources":["../src/js/API/api-books.js","../src/js/API/modal.js","../src/js/switch-button.js","../src/js/API/refs.js","../src/js/API/messageError.js","../src/js/API/home.js","../src/js/NZheader.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getBooks(endpoints, category) {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = `${endpoints}`;\n  let params;\n\n  if (category) params = { category: `${category}` };\n\n  const url = `${BASE_URL}${END_POINT}`;\n\n  const res = await axios.get(url, { params });\n  if (res.data.length === 0) {\n    throw new Error('Error');\n  } else {\n    return res.data;\n  }\n}\n","import { getBooks } from './api-books';\n\nconst body = document.querySelector('body');\nconst modal = document.querySelector('.modal');\nconst modalBackdrop = document.querySelector('.backdrop');\nconst closeModalButton = document.querySelector('.modal-close-btn');\nconst listButton = document.querySelector('.modal-list-btn');\n\n// Open modal\nexport async function GetBook(id) {\n  document.addEventListener('keydown', escapeCloseModal);\n  const data = await getBooks(id);\n  createModal(data);\n}\n\nfunction createModal(book) {\n  modalBackdrop.style.display = 'flex';\n\n  body.style.overflow = 'hidden';\n\n  const amazonUrl =\n    book.buy_links.find(link => link.name === 'Amazon')?.url || '';\n  const appleBooksUrl =\n    book.buy_links.find(link => link.name === 'Apple Books')?.url || '';\n\n  const buyLinksListHTML = `\n  <ul class=\"buy-links-list\">\n    <li>\n      <img src=\"../images/amazon.png\" alt=\"Amazon\" class=\"platform-image\" data-url=\"${amazonUrl}\">\n    </li>\n    <li>\n      <img src=\"../images/book.png\" alt=\"Apple Books\" class=\"platform-image\" data-url=\"${appleBooksUrl}\">\n    </li>\n  </ul>\n`;\n  modal.innerHTML = `\n  <div class=\"modal-container\">\n  <img src=\"${book.book_image}\" class=\"modal-image\">\n    <div class=\"modal-wrap\">\n      <h2 class=\"modal-title\">${book.title}</h2>\n      <p class=\"modal-author\">${book.author}</p>\n      <p class=\"description\">${book.description}</p>\n      ${buyLinksListHTML}\n    </div>  \n  </div>\n`;\n  modal.appendChild(closeModalButton);\n  modal.appendChild(listButton);\n\n  modal.querySelectorAll('.platform-image').forEach(image => {\n    image.addEventListener('click', () => {\n      const platformUrl = image.dataset.url;\n      if (platformUrl) {\n        window.open(platformUrl, '_blank');\n      } else {\n        console.error('Platform URL not found.');\n      }\n    });\n  });\n}\n\n//Add to shopping list\nfunction toggleShoppingList() {\n  const buttonText = listButton.textContent.trim();\n  const storedData = localStorage.getItem('shoppingList');\n  const shoppingList = JSON.parse(storedData) || {};\n\n  if (buttonText === 'add to shopping list') {\n    shoppingList[bookId] = true;\n    listButton.textContent = 'remove from the shopping list';\n  } else {\n    if (shoppingList[bookId]) {\n      delete shoppingList[bookId];\n    }\n    listButton.textContent = 'add to shopping list';\n  }\n\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n}\n\nlistButton.addEventListener('click', function () {\n  toggleShoppingList();\n  listButton.blur();\n});\n\n//Close modal\ndocument.addEventListener('DOMContentLoaded', function () {\n  closeModalButton.addEventListener('click', function () {\n    closeModal();\n  });\n\n  modalBackdrop.addEventListener('click', function (event) {\n    if (event.target === modalBackdrop) {\n      closeModal();\n    }\n  });\n});\n\nfunction escapeCloseModal(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n    document.removeEventListener('keydown', escapeCloseModal);\n  }\n}\n\nfunction closeModal() {\n  modalBackdrop.style.display = 'none';\n  body.style.overflow = 'auto';\n}\n","const switchBox = document.querySelector('.switch-box');\nconst switchButton = document.querySelector('.switch-button');\n\nswitchButton.addEventListener('click', newPosition => {\n  if (switchButton.dataset.switch === 'true') {\n    switchButton.classList.remove('new-position');\n    switchBox.classList.remove('new-background');\n    switchButton.dataset.switch = 'false';\n  } else {\n    switchButton.classList.add('new-position');\n    switchBox.classList.add('new-background');\n    switchButton.dataset.switch = 'true';\n  }\n});\n","export default\n\n{\n    galleryBooks:document.querySelector('.js-gallery-books'),\n    btnMore:document.querySelector('.btn-more'),\n        listCategoryTitle:document.querySelector('.list-category-title')\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nexport function errorMessage(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        });\n    \n}","import { getBooks } from './api-books';\nimport refs from './refs';\nimport { errorMessage } from './messageError';\nimport { GetBook } from './modal';\n\nlet previousWidth = window.innerWidth;\n\nwindow.addEventListener('resize', async () => {\n  const currentWidth = window.innerWidth;\n  //   refs.galleryBooks.innerHTML = '';\n  if (\n    previousWidth > 768 ||\n    (previousWidth < 768 && currentWidth >= 768) ||\n    (previousWidth >= 768 &&\n      currentWidth <= 1440 &&\n      (previousWidth <= 768 || currentWidth >= 1439))\n  ) {\n    try {\n      const data = await getBooks('top-books');\n      refs.galleryBooks.innerHTML = '';\n      for (const el of data) {\n        categoriesTemplate(el);\n        if (el.books.length >= 1) {\n          renderBooks(el);\n        } else {\n          errorMessage('Sorry, there are no items in this category');\n        }\n      }\n    } catch (error) {\n      errorMessage(`Failed to render books:${error}`);\n    }\n  }\n  previousWidth = currentWidth;\n});\n\nexport async function render(event) {\n  try {\n    const data = await getBooks('top-books');\n    for (const el of data) {\n      categoriesTemplate(el);\n      if (el.books.length >= 1) {\n        renderBooks(el);\n      } else {\n        errorMessage('Sorry, there are no items in this category');\n      }\n    }\n\n    const openModal = document.querySelectorAll('.card');\n    document.addEventListener('click', event => {\n      for (const item of openModal) {\n        let data = item.dataset.id;\n        if (event.target.parentNode === item) {\n          GetBook(data);\n        }\n      }\n    });\n  } catch (error) {\n    errorMessage(`Failed to render books:${error}`);\n  }\n}\n\nfunction categoriesTemplate(categories) {\n  const markup = `<li id=\"${categories.list_name}\" class=\"list-category-books\">\n    <h2 class=\"list-category-title\">${categories.list_name}</h2>\n    <ul class=\"list-book\">\n     </ul>    \n    </li>\n    <button type=\"button\" class=\"btn-more\">See more</button>`;\n  refs.galleryBooks.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction bookTemplate(book) {\n  const { book_image, author, title, _id, contributor, list_name } = book;\n  if (list_name)\n    return `\n    <li class=\"card book-item\" data-id=\"${_id}\">\n    <img class=\"book-img\" src=\"${book_image}\" alt=\"${contributor} ${title}\">\n    <h3 class=\"title-book\">${title}</h3>\n    <p class=\"author\">${author}</p>\n    </li>\n   `;\n}\nfunction booksTemplate(books) {\n  return books.map(bookTemplate).join('');\n}\n\nexport function renderBooks(el) {\n  const markup = onMediaScreenChange(el);\n  const categoriesID = el.list_name;\n  const listBook = document\n    .getElementById(categoriesID)\n    .querySelector('.list-book');\n  listBook.insertAdjacentHTML('afterbegin', markup);\n}\n\nfunction onMediaScreenChange(el) {\n  let mediaMarkup;\n  if (window.innerWidth >= 768 && window.innerWidth <= 1439) {\n    mediaMarkup = booksTemplate(el.books.slice(0, 3));\n  } else if (window.innerWidth >= 1440) {\n    mediaMarkup = booksTemplate(el.books);\n  } else {\n    mediaMarkup = booksTemplate(el.books.slice(0, 1));\n  }\n\n  return mediaMarkup;\n}\n","const homeBtn = document.querySelector('.js-hhome');\nconst shoppingBtn = document.querySelector('.js-hshopping');\n \nhomeBtn.addEventListener('click', onHomeBtnClick);\nshoppingBtn.addEventListener('click', onShoppingBtnClick);\n\n\nfunction onHomeBtnClick(e) {\n    e.preventDefault();\n    homeBtn.classList.add('hhome-btn');\n    shoppingBtn.classList.remove('hshopping-btn')\n  \n}\n\nfunction onShoppingBtnClick(e) {\n    e.preventDefault();\n    homeBtn.classList.remove('hhome-btn');\n    shoppingBtn.classList.add('hshopping-btn')\n  \n}","import { getBooks } from './js/API/api-books';\nimport './js/API/modal';\nimport './js/switch-button';\nimport { render } from './js/API/home';\nimport './js/NZheader';\nrender();\n"],"names":["getBooks","endpoints","category","BASE_URL","END_POINT","params","url","res","axios","body","modal","modalBackdrop","closeModalButton","listButton","GetBook","id","escapeCloseModal","data","createModal","book","amazonUrl","_a","link","appleBooksUrl","_b","buyLinksListHTML","image","platformUrl","toggleShoppingList","buttonText","storedData","shoppingList","closeModal","event","switchBox","switchButton","newPosition","refs","errorMessage","message","iziToast","previousWidth","currentWidth","el","categoriesTemplate","renderBooks","error","render","openModal","item","categories","markup","bookTemplate","book_image","author","title","_id","contributor","list_name","booksTemplate","books","onMediaScreenChange","categoriesID","mediaMarkup","homeBtn","shoppingBtn","onHomeBtnClick","onShoppingBtnClick"],"mappings":"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"}