import{a as J,i as T}from"./vendor-8cce9181.js";import{initializeApp as V}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";import{getDatabase as Z,set as G,ref as q,get as Q,update as X}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";import{getAuth as ee,createUserWithEmailAndPassword as te,updateProfile as se,signOut as C,onAuthStateChanged as ne,signInWithEmailAndPassword as oe}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();async function Ie(e,s){const n="https://books-backend.p.goit.global/books/",o=`${e}`;let t;s&&(t={category:`${s}`});const i=`${n}${o}`,c=await J.get(i,{params:t});if(c.data.length===0)throw new Error("Error");return c.data}const w="TASKS_KEY",I="USER_KEY";function h(e,s){localStorage.setItem(e,JSON.stringify(s))}function M(e){return JSON.parse(localStorage.getItem(e))}function Me(e){if(e.target.nodeName!=="BUTTON")return;const s=e.target.getAttribute("id");let n=[];const o=M(w);for(const t of o)t.constID!==s&&n.push(t);h(w,n)}document.addEventListener("DOMContentLoaded",function(){const e=window.location.href,s=document.querySelector(".js-hhome"),n=document.querySelector(".js-hshopping"),o=document.querySelector(".header-home-link"),t=document.querySelector(".hshopping-icon");e.includes("index.html")?(s.classList.add("header-newbg"),o.classList.remove("header-home-link")):e.includes("shoppinglist.html")&&(n.classList.add("header-newbg"),s.classList.remove("header-newbg"),t.classList.remove("hshopping-icon"))});document.querySelector(".hmob-burger-menu");const O=document.querySelector(".hburger-menu-icon"),d=document.querySelector(".hclose-menu-icon"),N=document.querySelector(".js-hmob-modal"),P=document.querySelector(".light");O.addEventListener("click",ie);function ie(e){e.preventDefault(),O.classList.toggle("is-visible"),d.classList.toggle("is-visible"),N.classList.toggle("is-visible"),P.style.overflow="hidden",d.style.display="flex"}d.addEventListener("click",()=>{O.classList.toggle("is-visible"),d.classList.toggle("is-visible"),N.classList.toggle("is-visible"),P.style.overflow="visible",d.style.display="none"});const re=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:null},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:null},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:null},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:null},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:null},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:null},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:null},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:null},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:null}],y=document.querySelector(".plus-btn"),v=document.querySelector(".second-btn"),L=document.querySelector(".header-menu"),D=document.querySelectorAll(".header-link");document.querySelectorAll(".header-item");for(let e=0;e<D.length;e++)D[e].setAttribute("href",`${re[e].url}`);y.addEventListener("click",function(){y.style.display="none",v.style.display="flex",L.style.transform="translateY(-156px)",L.style.transition="transform 2s allow-discrete"});v.addEventListener("click",function(){y.style.display="flex",v.style.display="none",L.style.transform=""});const B=document.querySelector(".switch-box"),S=document.querySelector(".switch-button"),g=document.querySelector("body"),k="";let l=!1;document.addEventListener("DOMContentLoaded",()=>{M(k)&&_()});S.addEventListener("click",_);function _(){l?(S.classList.remove("new-position"),B.classList.remove("new-background"),g.classList.remove("dark"),g.classList.add("light"),l=!1,h(k,l)):(S.classList.add("new-position"),B.classList.add("new-background"),g.classList.remove("light"),g.classList.add("dark"),l=!0),l&&h(k,l)}const b=document.querySelector(".number-shopping-list");document.addEventListener("DOMContentLoaded",ae);function ae(){let e=M(w);try{e.length!==0?b.innerHTML=`${e.length}`:b.innerHTML="0"}catch{b.innerHTML="0"}}function f(e){T.error({title:"Error",message:e,position:"topRight"})}function z(e){T.success({title:"Ok",message:e})}const ce="/Bookshelf_team-OnlyUP/assets/user-ec3c4a98.svg",le="/Bookshelf_team-OnlyUP/assets/Icon-a22f81d4.svg",ue="/Bookshelf_team-OnlyUP/assets/Vector-27ee4618.svg",de={apiKey:"AIzaSyDHiSfvnjzVWJqWI_IEEi6bW_1h4HyJ_fU",authDomain:"form-authorization-4890a.firebaseapp.com",databaseURL:"https://form-authorization-4890a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"form-authorization-4890a",storageBucket:"form-authorization-4890a.appspot.com",messagingSenderId:"168346739495",appId:"1:168346739495:web:c2181a801d16964f053f02"},me=V(de),U=Z(me),a=ee(),pe=document.querySelector(".h-user"),E=document.querySelector(".h-user-mobail-sign"),ge=document.querySelector(".h-user-mobail"),r=document.querySelector("#favDialog"),m=document.querySelector("#favDialogWrap"),he=document.querySelector("#btn-close"),H=document.querySelector("#btn-open-up");document.querySelector("#btn-open-in");const u=document.querySelector(".link-singUp"),p=document.querySelector(".link-singIn"),W=document.querySelector(".wrap-form"),$=document.querySelector(".form-authorization"),K=document.querySelector(".user"),R=document.querySelector(".wrap-desk-btn"),fe=document.querySelector(".user-nickname-name");document.querySelector(".js-hmob-modal");he.addEventListener("click",()=>{r.close(),m.classList.remove("backdrop-wrap")});pe.addEventListener("click",()=>{r.showModal(),m.classList.add("backdrop-wrap"),u.classList.add("text-decoration-line")});E.addEventListener("click",()=>{r.showModal(),m.classList.add("backdrop-wrap")});H.addEventListener("click",A);$.addEventListener("submit",j);u.addEventListener("click",Y);p.addEventListener("click",F);ge.addEventListener("click",we);H.addEventListener("click",A);$.addEventListener("submit",j);u.addEventListener("click",Y);p.addEventListener("click",F);async function A(){const e=document.getElementById("email").value,s=document.getElementById("current-password").value,n=document.getElementById("username").value;try{const t=(await te(a,e,s)).user;await G(q(U,"users/"+t.uid),{username:n,email:e}),z("New account created"),m.classList.remove("backdrop-wrap"),await se(t,{displayName:n}),h(I,{displayName:n})}catch(o){o.code==="auth/email-already-in-use"?f("The email address is already in use."):f(o.message)}}async function be(){u.classList.add("text-decoration-line"),p.classList.remove("text-decoration-line");const e=document.getElementById("email").value,s=document.getElementById("current-password").value;await oe(a,e,s).then(n=>{const o=n.user,t=new Date;X(q(U,"users/"+o.uid),{last_login:t}),z("You loged in"),m.classList.remove("backdrop-wrap")}).catch(n=>{n.code==="auth/invalid-credential"?f("Please ensure that the data entered is accurate and free from errors."):f(n.message)})}function we(){C(a).then(()=>{localStorage.removeItem(I),x(),window.location.href="index.html"}).catch(e=>{console.log(e.message)})}function ye(){C(a).then(()=>{R.innerHTML=`<button class="h-user">
          Sign up
          <svg class="h-user-sign" width="20" height="20">
            <use href="./images/icons.svg#icon-arrow"></use>
          </svg>
        </button>`,document.querySelector(".h-user").addEventListener("click",()=>{r.showModal()}),window.location.href="index.html",localStorage.removeItem(I)}).catch(e=>{console.log(e.message)})}a.currentUser;ne(a,e=>{if(e){const s=e.uid,n=q(U,`users/${s}`);Q(n).then(o=>{if(o.exists()){const i=o.val().username;fe.textContent=i}else console.log("Дані про користувача відсутні в базі даних")}).catch(o=>{console.error("Помилка при отриманні даних користувача:",o)})}x()});function j(e){e.preventDefault(),x()}function x(){window.matchMedia("(min-width: 768px)").matches?window.setTimeout(ve,1e3):(K.classList.remove("hidden"),Le())}function Y(){u.classList.add("text-decoration-line"),p.classList.remove("text-decoration-line");const e=`
  <div class="wrap-input">
                    <input class="input" type="text" name="name" placeholder="NAME" id="username" autocomplete="username">
					<label class="form-label" for="email">
					<input class="input" type="email" name="email" placeholder="EMAIL" id="email" autocomplete="email">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-mail"></use>
					</svg>
				</label>
				<label class="form-label" for="current-password">
					<input class="input " type="password" name="password" placeholder="PASSWORD" id="current-password"
						autocomplete="current-password">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-lock"></use>
					</svg>
				</label>
                </div>
                <button type="submit" id="btn-open-up">sing up</button>
  `;r.classList.remove("sizeIn"),r.classList.add("sizeUp"),W.innerHTML=e,document.querySelector("#btn-open-up").addEventListener("click",A)}function F(){u.classList.remove("text-decoration-line"),p.classList.add("text-decoration-line");const e=`<div class="wrap-input">
	<label class="form-label" for="email">
					<input class="input" type="email" name="email" placeholder="EMAIL" id="email" autocomplete="email">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-mail"></use>
					</svg>
				</label>
				<label class="form-label" for="current-password">
					<input class="input " type="password" name="password" placeholder="PASSWORD" id="current-password"
						autocomplete="current-password">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-lock"></use>
					</svg>
				</label>
  	</div>
  <button type="submit" id="btn-open-in">sing in</button>
  `;r.classList.remove("sizeUp"),r.classList.add("sizeIn"),W.innerHTML=e,document.querySelector("#btn-open-in").addEventListener("click",be)}function ve(){const e=a.currentUser;if(e){const s=e.displayName;R.innerHTML=`<div class="user-nickname-desk toggleMenu">
        <div class="user-nickname-desk-auth">
			<img src="${ce}" alt="" class="user-nickname-icon" width="37" height="37">
            <p class="user-nickname-name">${s}</p>
		    <img src="${ue}" alt="" class="user-icon-caret-down" width="23" height="26">
        </div>
      </div>
      <div class="h-user-logout-desk">	  
		<p class="user-nickname-name-modal">Do you want to go out?</p> 
        <button class="btnLogOutClose">
          Log out
		  <img src="${le}" alt="" class="h-user-sign-mobail" width="20" height="20">
        </button>
      </div>`,r.close();const n=document.querySelector(".h-user-logout-desk"),o=document.querySelector(".user-icon-caret-down"),t=document.querySelector(".toggleMenu"),i=document.querySelector(".btnLogOutClose");t.addEventListener("click",()=>{n.classList.toggle("h-user-logout-desk-active"),o.classList.toggle("user-icon-caret-down-active")}),i.addEventListener("click",ye)}}function Le(){if(!a.currentUser&&window.matchMedia("(max-width: 768px)").matches){E.classList.remove("hidden"),K.classList.add("hidden");return}else{E.classList.add("hidden"),r.close();return}}export{w as T,h as a,ae as c,f as e,Ie as g,M as i,Me as r};
//# sourceMappingURL=form-authorization-a718f71d.js.map
