import{a as F,i as T}from"./vendor-8cce9181.js";import{initializeApp as J}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";import{getDatabase as V,set as Z,ref as E,get as G,update as Q}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";import{getAuth as X,createUserWithEmailAndPassword as ee,updateProfile as te,signOut as C,onAuthStateChanged as se,signInWithEmailAndPassword as ne}from"https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();async function Se(e,s){const n="https://books-backend.p.goit.global/books/",o=`${e}`;let t;s&&(t={category:`${s}`});const i=`${n}${o}`,c=await F.get(i,{params:t});if(c.data.length===0)throw new Error("Error");return c.data}const b="TASKS_KEY",q="USER_KEY";function p(e,s){localStorage.setItem(e,JSON.stringify(s))}function I(e){return JSON.parse(localStorage.getItem(e))}function ke(e){if(e.target.nodeName!=="BUTTON")return;const s=e.target.getAttribute("id");let n=[];const o=I(b);for(const t of o)t.constID!==s&&n.push(t);p(b,n)}document.addEventListener("DOMContentLoaded",function(){const e=window.location.href,s=document.querySelector(".js-hhome"),n=document.querySelector(".js-hshopping"),o=document.querySelector(".header-home-link"),t=document.querySelector(".hshopping-icon");e.includes("index.html")?(s.classList.add("header-newbg"),o.classList.remove("header-home-link")):e.includes("shoppinglist.html")&&(n.classList.add("header-newbg"),s.classList.remove("header-newbg"),t.classList.remove("hshopping-icon"))});document.querySelector(".hmob-burger-menu");const M=document.querySelector(".hburger-menu-icon"),d=document.querySelector(".hclose-menu-icon"),B=document.querySelector(".js-hmob-modal"),N=document.querySelector(".light");M.addEventListener("click",oe);function oe(e){e.preventDefault(),M.classList.toggle("is-visible"),d.classList.toggle("is-visible"),B.classList.toggle("is-visible"),N.style.overflow="hidden",d.style.display="flex"}d.addEventListener("click",()=>{M.classList.toggle("is-visible"),d.classList.toggle("is-visible"),B.classList.toggle("is-visible"),N.style.overflow="visible",d.style.display="none"});const ie=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:null},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:null},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:null},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:null},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:null},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:null},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:null},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:null},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:null}],y=document.querySelector(".plus-btn"),w=document.querySelector(".second-btn"),v=document.querySelector(".header-menu"),U=document.querySelectorAll(".header-link");document.querySelectorAll(".header-item");for(let e=0;e<U.length;e++)U[e].setAttribute("href",`${ie[e].url}`);y.addEventListener("click",function(){y.style.display="none",w.style.display="flex",v.style.transform="translateY(-156px)",v.style.transition="transform 2s allow-discrete"});w.addEventListener("click",function(){y.style.display="flex",w.style.display="none",v.style.transform=""});const D=document.querySelector(".switch-box"),L=document.querySelector(".switch-button"),g=document.querySelector("body"),S="";let l=!1;document.addEventListener("DOMContentLoaded",()=>{I(S)&&z()});L.addEventListener("click",z);function z(){l?(L.classList.remove("new-position"),D.classList.remove("new-background"),g.classList.remove("dark"),g.classList.add("light"),l=!1,p(S,l)):(L.classList.add("new-position"),D.classList.add("new-background"),g.classList.remove("light"),g.classList.add("dark"),l=!0),l&&p(S,l)}const f=document.querySelector(".number-shopping-list");document.addEventListener("DOMContentLoaded",re);function re(){let e=I(b);try{e.length!==0?f.innerHTML=`${e.length}`:f.innerHTML="0"}catch{f.innerHTML="0"}}function h(e){T.error({title:"Error",message:e,position:"topRight"})}function P(e){T.success({title:"Ok",message:e})}const ae={apiKey:"AIzaSyDHiSfvnjzVWJqWI_IEEi6bW_1h4HyJ_fU",authDomain:"form-authorization-4890a.firebaseapp.com",databaseURL:"https://form-authorization-4890a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"form-authorization-4890a",storageBucket:"form-authorization-4890a.appspot.com",messagingSenderId:"168346739495",appId:"1:168346739495:web:c2181a801d16964f053f02"},ce=J(ae),O=V(ce),a=X(),le=document.querySelector(".h-user"),k=document.querySelector(".h-user-mobail-sign"),ue=document.querySelector(".h-user-mobail"),r=document.querySelector("#favDialog"),de=document.querySelector("#btn-close"),H=document.querySelector("#btn-open-up");document.querySelector("#btn-open-in");const u=document.querySelector(".link-singUp"),m=document.querySelector(".link-singIn"),_=document.querySelector(".wrap-form"),K=document.querySelector(".form-authorization"),R=document.querySelector(".user"),W=document.querySelector(".wrap-desk-btn"),me=document.querySelector(".user-nickname-name");document.querySelector(".js-hmob-modal");de.addEventListener("click",()=>{r.close()});le.addEventListener("click",()=>{r.showModal(),u.classList.add("text-decoration-line")});k.addEventListener("click",()=>{r.showModal()});H.addEventListener("click",x);K.addEventListener("submit",j);u.addEventListener("click",$);m.addEventListener("click",Y);ue.addEventListener("click",pe);H.addEventListener("click",x);K.addEventListener("submit",j);u.addEventListener("click",$);m.addEventListener("click",Y);async function x(){const e=document.getElementById("email").value,s=document.getElementById("current-password").value,n=document.getElementById("username").value;try{const t=(await ee(a,e,s)).user;await Z(E(O,"users/"+t.uid),{username:n,email:e}),P("New account created"),await te(t,{displayName:n}),p(q,{displayName:n})}catch(o){o.code==="auth/email-already-in-use"?(r.close(),h("The email address is already in use.")):h(o.message)}}async function ge(){u.classList.add("text-decoration-line"),m.classList.remove("text-decoration-line");const e=document.getElementById("email").value,s=document.getElementById("current-password").value;await ne(a,e,s).then(n=>{const o=n.user,t=new Date;Q(E(O,"users/"+o.uid),{last_login:t}),P("You loged in")}).catch(n=>{n.code==="auth/invalid-credential"?(r.close(),h("Please ensure that the data entered is accurate and free from errors.")):h(n.message)})}function pe(){C(a).then(()=>{localStorage.removeItem(q),A(),window.location.href="index.html"}).catch(e=>{console.log(e.message)})}function he(){C(a).then(()=>{W.innerHTML=`<button class="h-user">
          Sign up
          <svg class="h-user-sign" width="20" height="20">
            <use href="./images/icons.svg#icon-arrow"></use>
          </svg>
        </button>`,document.querySelector(".h-user").addEventListener("click",()=>{r.showModal()}),window.location.href="index.html",localStorage.removeItem(q)}).catch(e=>{console.log(e.message)})}a.currentUser;se(a,e=>{if(e){const s=e.uid,n=E(O,`users/${s}`);G(n).then(o=>{if(o.exists()){const i=o.val().username;me.textContent=i}else console.log("Дані про користувача відсутні в базі даних")}).catch(o=>{console.error("Помилка при отриманні даних користувача:",o)})}A()});function j(e){e.preventDefault(),A()}function A(){window.matchMedia("(min-width: 768px)").matches?window.setTimeout(fe,1e3):(R.classList.remove("hidden"),be())}function $(){u.classList.add("text-decoration-line"),m.classList.remove("text-decoration-line");const e=`
  <div class="wrap-input">
                    <input class="input" type="text" name="name" placeholder="NAME" id="username" autocomplete="username">
					<label class="form-label" for="email">
					<input class="input" type="email" name="email" placeholder="EMAIL" id="email" autocomplete="email">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-mail"></use>
					</svg>
				</label>
				<label class="form-label" for="current-password">
					<input class="input " type="password" name="password" placeholder="PASSWORD" id="current-password"
						autocomplete="current-password">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-lock"></use>
					</svg>
				</label>
                </div>
                <button type="submit" id="btn-open-up">sing up</button>
  `;r.classList.remove("sizeIn"),r.classList.add("sizeUp"),_.innerHTML=e,document.querySelector("#btn-open-up").addEventListener("click",x)}function Y(){u.classList.remove("text-decoration-line"),m.classList.add("text-decoration-line");const e=`<div class="wrap-input">
	<label class="form-label" for="email">
					<input class="input" type="email" name="email" placeholder="EMAIL" id="email" autocomplete="email">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-mail"></use>
					</svg>
				</label>
				<label class="form-label" for="current-password">
					<input class="input " type="password" name="password" placeholder="PASSWORD" id="current-password"
						autocomplete="current-password">
					<svg class="icons-form" width="28" height="28">
						<use href="./images/symbol-defs.svg#icon-form-lock"></use>
					</svg>
				</label>
  	</div>
  <button type="submit" id="btn-open-in">sing in</button>
  `;r.classList.remove("sizeUp"),r.classList.add("sizeIn"),_.innerHTML=e,document.querySelector("#btn-open-in").addEventListener("click",ge)}function fe(){const e=a.currentUser;if(e){const s=e.displayName;W.innerHTML=`<div class="user-nickname-desk toggleMenu">
        <div class="user-nickname-desk-auth">
          <svg class="user-nickname-icon" width="37" height="37">
            <use href="/images/icons.svg#icon-user"></use>
          </svg>
          <p class="user-nickname-name">${s}</p>
          <svg class="user-icon-caret-down" width="23" height="26">
            <use href="/images/icons.svg#icon-caret-down"></use>
          </svg>
        </div>
      </div>
      <div class="h-user-logout-desk">	  
		<p class="user-nickname-name-modal">Do you want to go out?</p> 
        <button class="btnLogOutClose">
          Log out
          <svg class="h-user-sign-mobail" width="20" height="20">
            <use href="/images/icons.svg#icon-arrow"></use>
          </svg>
        </button>
      </div>`,r.close();const n=document.querySelector(".h-user-logout-desk"),o=document.querySelector(".user-icon-caret-down"),t=document.querySelector(".toggleMenu"),i=document.querySelector(".btnLogOutClose");t.addEventListener("click",()=>{n.classList.toggle("h-user-logout-desk-active"),o.classList.toggle("user-icon-caret-down-active")}),i.addEventListener("click",he)}}function be(){if(!a.currentUser&&window.matchMedia("(max-width: 768px)").matches){k.classList.remove("hidden"),R.classList.add("hidden");return}else{k.classList.add("hidden"),r.close();return}}export{b as T,p as a,re as c,h as e,Se as g,I as i,ke as r};
//# sourceMappingURL=form-authorization-de6f1548.js.map
