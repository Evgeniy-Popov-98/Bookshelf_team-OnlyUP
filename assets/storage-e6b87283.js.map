{"version":3,"file":"storage-e6b87283.js","sources":["../../src/js/API/api-books.js","../../src/js/localStorage.js","../../src/images/IMG_9606.png","../../src/images/amazon.svg","../../src/images/book.svg","../../src/images/trash.svg","../../src/js/API/storage.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getBooks(endpoints, category) {\n  const BASE_URL = 'https://books-backend.p.goit.global/books/';\n  const END_POINT = `${endpoints}`;\n  let params;\n\n  if (category) params = { category: `${category}` };\n\n  const url = `${BASE_URL}${END_POINT}`;\n\n  const res = await axios.get(url, { params });\n  if (res.data.length === 0) {\n    throw new Error('Error');\n  } else {\n    return res.data;\n  }\n}\n\n\n\n","// localStorage.js\n\nexport const TASKS_KEY = 'TASKS_KEY';\n\nexport function addItemLocalStorage(key, item) {\n  localStorage.setItem(key, JSON.stringify(item));\n}\n\nexport function infoItemLocalStorage(key) {\n  return JSON.parse(localStorage.getItem(key));\n}\n\nexport function restoreData(event) {\n  if (event.target.nodeName !== 'BUTTON') return;\n  const idItem = event.target.getAttribute('id');\n  let newArr = [];\n  const dataArr = infoItemLocalStorage(TASKS_KEY);\n  for (const item of dataArr) {\n    if (item.constID !== idItem) {\n      newArr.push(item);\n    }\n  }\n  addItemLocalStorage(TASKS_KEY, newArr);\n}\n","export default \"__VITE_ASSET__4fd78ed1__\"","export default \"__VITE_ASSET__614bd757__\"","export default \"__VITE_ASSET__f0c2f45b__\"","export default \"__VITE_ASSET__d53f63a1__\"","import { getBooks } from './api-books';\nimport {\n  addItemLocalStorage,\n  infoItemLocalStorage,\n  TASKS_KEY,\n} from '../localStorage';\nimport img9606 from '/images/IMG_9606.png';\nimport amazonSvg from '/images/amazon.svg';\nimport bookSvg from '/images/book.svg';\nimport trashSvg from '/images/trash.svg';\n\nconst shoppingListContainer = document.querySelector('.shoppinglist-container');\nconst emptyMessage = `\n    <div class=\"shoppinglist-blocks\">\n        <h2 class=\"text\">This page is empty, add some books and proceed to order.</h2>\n        <img src=\"${img9606}\" alt=\"Shopping Image\" class=\"shoppinglist-img96061\">\n    </div>\n`;\n\nexport async function addToShoppingList() {\n  try {\n    const booksIds = infoItemLocalStorage(TASKS_KEY); // Отримуємо масив ідентифікаторів книг з локального сховища\n\n    if (!booksIds || !booksIds.length) {\n      // Відображаємо повідомлення про порожній список, якщо немає книг\n      shoppingListContainer.innerHTML = emptyMessage;\n      return;\n    }\n\n    let markup = '';\n\n    for (const bookId of booksIds) {\n      const dataBook = await getBooks(bookId);\n      markup += createBookMarkup(dataBook, bookId); // Передаємо ідентифікатор книги\n    }\n\n    shoppingListContainer.innerHTML = markup;\n  } catch (error) {\n    console.error('Помилка отримання даних книги:', error);\n  }\n}\n\nfunction createBookMarkup(book, bookId) {\n  // Додаємо параметр bookId\n  return `\n    <div class=\"container-block\" data-book-id=\"${bookId}\"> <!-- Додаємо атрибут data-book-id -->\n        <!-- Розмітка для відображення інформації про книгу -->\n        <div class=\"btn-and-links\">\n            <button class=\"trash-btn\"><img src=\"${trashSvg}\" alt=\"\"></button>\n            <ul class=\"links\">\n                <li><img src=\"${amazonSvg}\" class=\"amazon\"></li>\n                <li><img src=\"${bookSvg}\"></li>\n            </ul>\n        </div>\n        <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"book-image\">\n        <div class=\"text-area\">\n            <h2 class=\"shopping-list-title\">${book.title}</h2>\n            <h2 class=\"shopping-list-title-name\">${book.list_name}</h2>\n            <p class=\"shopping-list-description\">${book.description}</p>\n            <h2 class=\"shopping-list-author\">${book.author}</h2>\n        </div>\n    </div>\n  `;\n}\n\nshoppingListContainer.addEventListener('click', function (event) {\n  const target = event.target;\n  if (event.target.nodeName !== 'BUTTON' || event.target.nodeName !== 'IMG') {\n    const bookContainer = target.closest('.container-block');\n    const bookId = bookContainer.getAttribute('data-book-id');\n\n    const booksIds = infoItemLocalStorage(TASKS_KEY) || [];\n    const index = booksIds.indexOf(bookId);\n    if (index !== -1) {\n      booksIds.splice(index, 1); // Видаляємо ідентифікатор книги з масиву\n      addItemLocalStorage(TASKS_KEY, booksIds); // Оновлюємо локальне сховище\n    }\n\n    bookContainer.remove(); // Видаляємо HTML елемент книги зі списку покупок\n\n    if (!shoppingListContainer.querySelector('.container-block')) {\n      // Перевіряємо, чи немає більше жодної книги в списку покупок\n      shoppingListContainer.innerHTML = emptyMessage;\n    }\n  }\n});\n"],"names":["getBooks","endpoints","category","BASE_URL","END_POINT","params","url","res","axios","TASKS_KEY","addItemLocalStorage","key","item","infoItemLocalStorage","restoreData","event","idItem","newArr","dataArr","img9606","amazonSvg","bookSvg","trashSvg","shoppingListContainer","emptyMessage","addToShoppingList","booksIds","markup","bookId","dataBook","createBookMarkup","error","book","target","bookContainer","index"],"mappings":"+uBAEO,eAAeA,EAASC,EAAWC,EAAU,CAClD,MAAMC,EAAW,6CACXC,EAAY,GAAGH,CAAS,GAC9B,IAAII,EAEAH,IAAUG,EAAS,CAAE,SAAU,GAAGH,CAAQ,KAE9C,MAAMI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,GAE7BG,EAAM,MAAMC,EAAM,IAAIF,EAAK,CAAE,OAAAD,CAAM,CAAE,EAC3C,GAAIE,EAAI,KAAK,SAAW,EACtB,MAAM,IAAI,MAAM,OAAO,EAEvB,OAAOA,EAAI,IAEf,CCfY,MAACE,EAAY,YAElB,SAASC,EAAoBC,EAAKC,EAAM,CAC7C,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAI,CAAC,CAChD,CAEO,SAASC,EAAqBF,EAAK,CACxC,OAAO,KAAK,MAAM,aAAa,QAAQA,CAAG,CAAC,CAC7C,CAEO,SAASG,EAAYC,EAAO,CACjC,GAAIA,EAAM,OAAO,WAAa,SAAU,OACxC,MAAMC,EAASD,EAAM,OAAO,aAAa,IAAI,EAC7C,IAAIE,EAAS,CAAA,EACb,MAAMC,EAAUL,EAAqBJ,CAAS,EAC9C,UAAWG,KAAQM,EACbN,EAAK,UAAYI,GACnBC,EAAO,KAAKL,CAAI,EAGpBF,EAAoBD,EAAWQ,CAAM,CACvC,CCvBA,MAAeE,EAAA,mDCAAC,EAAA,iDCAAC,EAAA,+CCAAC,EAAA,gDCWTC,EAAwB,SAAS,cAAc,yBAAyB,EACxEC,EAAe;AAAA;AAAA;AAAA,oBAGDL,CAAO;AAAA;AAAA,EAIpB,eAAeM,GAAoB,CACxC,GAAI,CACF,MAAMC,EAAWb,EAAqBJ,CAAS,EAE/C,GAAI,CAACiB,GAAY,CAACA,EAAS,OAAQ,CAEjCH,EAAsB,UAAYC,EAClC,MACD,CAED,IAAIG,EAAS,GAEb,UAAWC,KAAUF,EAAU,CAC7B,MAAMG,EAAW,MAAM7B,EAAS4B,CAAM,EACtCD,GAAUG,EAAiBD,EAAUD,CAAM,CAC5C,CAEDL,EAAsB,UAAYI,CACnC,OAAQI,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACtD,CACH,CAEA,SAASD,EAAiBE,EAAMJ,EAAQ,CAEtC,MAAO;AAAA,iDACwCA,CAAM;AAAA;AAAA;AAAA,kDAGLN,CAAQ;AAAA;AAAA,gCAE1BF,CAAS;AAAA,gCACTC,CAAO;AAAA;AAAA;AAAA,oBAGnBW,EAAK,UAAU,UAAUA,EAAK,KAAK;AAAA;AAAA,8CAETA,EAAK,KAAK;AAAA,mDACLA,EAAK,SAAS;AAAA,mDACdA,EAAK,WAAW;AAAA,+CACpBA,EAAK,MAAM;AAAA;AAAA;AAAA,GAI1D,CAEAT,EAAsB,iBAAiB,QAAS,SAAUR,EAAO,CAC/D,MAAMkB,EAASlB,EAAM,OACrB,GAAIA,EAAM,OAAO,WAAa,UAAYA,EAAM,OAAO,WAAa,MAAO,CACzE,MAAMmB,EAAgBD,EAAO,QAAQ,kBAAkB,EACjDL,EAASM,EAAc,aAAa,cAAc,EAElDR,EAAWb,EAAqBJ,CAAS,GAAK,CAAA,EAC9C0B,EAAQT,EAAS,QAAQE,CAAM,EACjCO,IAAU,KACZT,EAAS,OAAOS,EAAO,CAAC,EACxBzB,EAAoBD,EAAWiB,CAAQ,GAGzCQ,EAAc,OAAM,EAEfX,EAAsB,cAAc,kBAAkB,IAEzDA,EAAsB,UAAYC,EAErC,CACH,CAAC"}